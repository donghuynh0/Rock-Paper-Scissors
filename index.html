<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock-Paper-Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <main>
        <h1>Rock Paper Scissors</h1>

        <!-- [0:1/3) is Rock ; [1/3:2/3) is Paper ; [2/3:1] is Scissors -->

        <!-- Rock button -->
        <button class="cart"
        onclick="
            play('Rock');
        "> Rock</button>

        <!-- Paper button -->
        <button class="cart"
        onclick="
            play('Paper');
        "> Paper</button>

        <!-- Scissors button -->
        <button class="cart"
        onclick="
            play('Scissors');
        "> Scissors</button>

        <!-- Reset button -->
        <button class="cart"
        onclick="
            localStorage.clear('Scores');
        "> Reset</button>

        <!-- Show score button -->
        <button class="cart" 
        onclick="
            Scores.show('user');
            Scores.show('computer');
        ">Show score</button>

        <!-- Show histories button -->
        <button class="cart" onclick="
            Scores.histories.forEach(history => console.log(history));
        ">Show histories</button>

    </main>
    <script>
        let userMove = '';
        let numberRandom;
        let cMove = '';
        let result = '';
        let Scores = {
            wins: 0,
            loses: 0,
            ties: 0,
            histories: [],
            // save data
            save() {
                localStorage.setItem('Scores', JSON.stringify(this));
            },
            // load data
            load() {
                let scores = JSON.parse(localStorage.getItem('Scores'));
                if (scores) {
                    this.wins = scores.wins;
                    this.loses = scores.loses;
                    this.ties = scores.ties;
                    this.histories = scores.histories;
                }
            },
            // show histories
            show(type) {
                if (type == 'user') {
                    console.log(`Scores of User\nWins: ${this.wins} | Loses: ${this.loses} | Ties: ${this.ties}`)
                } else if (type == 'computer') {
                    console.log(`Scores of Computer\nWins: ${this.loses} | Loses: ${this.wins} | Ties: ${this.ties}`)
                }
            }
        }

        // load data from local storage
        Scores.load();

        // Play rock paper scissors
        function play (userMove) {
            numberRandom = Math.random();
            if (numberRandom >= 0 && numberRandom < 1/3) {
                cMove = 'Rock';
                if (userMove == 'Rock') {
                    result = 'Tie.';
                    Scores.ties += 1;
                } else if (userMove == 'Paper') {
                    result = 'You win.';
                    Scores.wins += 1;
                } else if (userMove == 'Scissors') {
                    result = 'You lose.';
                    Scores.loses += 1;
                }
            } else if (numberRandom >= 1/3 && numberRandom < 2/3) {
                cMove = 'Paper';
                if (userMove == 'Rock') {
                    result = 'You lose.';
                    Scores.loses += 1;
                } else if (userMove == 'Paper') {
                    result = 'Tie.';
                    Scores.ties += 1;
                } else if (userMove == 'Scissors') {
                    result = 'You win.';
                    Scores.wins += 1;
                }
            } else if (numberRandom >= 2/3 && numberRandom <= 1) {
                cMove = 'Scissors';
                if (userMove == 'Rock') {
                    result = 'You win.';
                    Scores.wins += 1;
                } else if (userMove == 'Paper') {
                    result = 'You lose.';
                    Scores.loses += 1;
                } else if (userMove == 'Scissors') {
                    result = 'Tie.';
                    Scores.ties += 1;
                }
            }
            alert(`Your choice : ${userMove}\nComputer choice: ${cMove}\nResult: ${result}`)
            Scores.histories.push(`Computer: ${cMove} | User: ${userMove} | Result: ${result}`);
            Scores.save();
        }    
    </script>
</body>
</html>
